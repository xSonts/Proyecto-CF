<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Monitor de Sensores</title>
</head>
<body>
  <h1>Datos del ESP32</h1>
  <p>Temperatura: <span id="temp">--</span> Â°C</p>
  <p>Humedad: <span id="hum">--</span> %</p>
  <p>Ruido: <span id="ruido">--</span> dB</p>
  <p>Luz: <span id="luz">--</span> lx</p>

  <script>
    function actualizarDatos() {
      fetch('/api/datos')
        .then(response => response.json())
        .then(data => {
          document.getElementById('temp').textContent = data.temperatura ?? '--';
          document.getElementById('hum').textContent = data.humedad ?? '--';
          document.getElementById('ruido').textContent = data.ruido ?? '--';
          document.getElementById('luz').textContent = data.luz ?? '--';
        })
        .catch(err => console.error('Error al obtener datos:', err));
    }

    // Llama cada 2 segundos
    setInterval(actualizarDatos, 2000);
    actualizarDatos(); // Llamada inicial
  </script>
</body>
</html>
